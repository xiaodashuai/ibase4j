<!-- toaster directive -->
<toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}"></toaster-container>
<!-- / toaster directive -->

<!-- 导航条 -->
<div class="bg-white bread-crumb">
	<ul class="breadcrumb b-a m-b-n-xs lter b-b wrapper-md">
		<li>您当前所在位置：</li>
		<li>
			<a ui-sref="main">
				发放条件
			</a>
		</li>
		<li class="active" ng-bind="title">
			<!--<a >方案查询</a>-->
		</li>
	</ul>
	<!--<li class="active" ng-bind="title"></li>-->
</div>
<!-- 加载提醒 -->
<div ng-show="loading" class="text-center m-t-md text-lg"><i class="fa fa-spin fa-spinner"></i> 数据加载中...</div>

<!-- 数据显示 -->
<div class="wrapper-data">
	<div class="panel panel-default">
		<!-- 头部 -->
		<div class="panel-heading clearfix">
			<div class="w-lg">
				<form ng-submit="search(0)" class="ng-pristine ng-valid" id="queryForm">
					<div class="input-group search-box" style="width:100%;">
						<div class="row mt3" style="line-height: 30px;height: 45px;">
							<div class="col-sm-2" style="width:130px;">
								<label class="control-label " style="float: right;">发放条件编号:</label>
							</div>
							<div class="col-sm-2" style="width:150px;">
								<input class="form-control" type="text" style="width:150px" ng-model="param.schemeNum" placeholder="模糊查询发放编号" maxlength="19">
							</div>
							<div class="col-sm-2" style="width:100px;">
								<label class="control-label " style="float: right;">产品名称:</label>
							</div>
							<div class="col-sm-2" style="width:150px;">
								<input class="form-control" type="text" style="width:150px" ng-model="param.businessName" maxlength="50">
							</div>
							<div class="col-sm-2" style="width:100px;">
								<label class="control-label " style="float: right;">时间查询:</label>
							</div>
							<div class="col-sm-2" style="width:*px;min-width:300px;">
								<input onclick="WdatePicker({onpicking:function(dp){cleanRequiredWarn(this);}})" onchange="" class="form-control date" style="width:120px;" ng-model="param.stateTime">
								至&nbsp;<input onclick="WdatePicker({onpicking:function(dp){cleanRequiredWarn(this);}})" onchange="" class="form-control date" style="width:120px;" ng-model="param.endTime">
							</div>
						</div>
						<div class="row mt3">
							<div class="col-sm-2" style="width:130px;">
								<label class="control-label" style="float: right;">申请人名称:</label>
							</div>
							<div class="col-sm-2" style="width:150px;">
								<input class="form-control" type="text" style="width:150px" ng-model="param.applicant" maxlength="50">
							</div>
							<div class="col-sm-2" style="width:100px;">
								<label class="control-label " style="float: right;">所属机构:</label>
							</div>
							<div class="col-sm-2" style="width:230px;">
								<select class="form-control" id="deptCode" style="width:230px;"></select>
							</div>
							<div class="col-sm-2" style="width:130px;">
								<label class="control-label " style="float: right;">发放条件状态:</label>
							</div>
							<div class="col-sm-2" style="width:120px;">
								<select class="form-control" ng-model="param.grantStatus" style="width:120px;">
									<option value="">请选择</option>
									<option value="1">已变更</option>
									<option value="2">新建审核中</option>
									<option value="3">已批未放</option>
									<option value="4">发放中</option>
									<option value="5">已发放</option>
									<option value="6">已废弃</option>
									<option value="7">废弃审核中</option>
									<option value="8">变更审核中</option>
									<option value="10">已驳回</option>
									<option value="13">已过期</option>
									<option value="15">已结清</option>
								</select>
							</div>
							<div class="col-sm-2" style="width:80px;">
								<button type="submit" class="el-button el-button--primary" style="width:70px;margin-left:5px;">查询</button>
							</div>
							<div class="col-sm-2" style="width:80px;">
								<button type="button" class="el-button el-button--primary" ng-click="clearSearch('queryForm')" style="width:70px;margin-left:10px;">清空</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<!-- 数据表格 -->
		<div class="table-responsive">
			<table class="table table-striped b-t b-light">
				<thead>
					<tr>
						<th width="50px;" style="text-align: center;">序号</th>
						<th width="120px;" style="text-align: center;">发放条件编号</th>
						<th width="120px;" style="text-align: center;">申请人名称</th>
						<th width="*px;" style="text-align: center;min-width:90px;">产品名称</th>
						<th width="70px;" style="text-align: center;">币种</th>
						<th width="110px;" style="text-align: center;">金额</th> 
						<th width="85px" style="text-align: center;">业务期限</th>
						<th width="115px;" style="text-align: center;">发放条件状态</th> 
						<th width="85px" style="text-align: center;">所属机构</th>
						<th width="85px" style="text-align: center;">操作人员</th>
						<th width="90px" style="text-align: center;">提交时间</th> 
						<th width="80px;" style="text-align: center;">操作</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="item in pageInfo.data" style="text-align: center;">
						<td>{{(pageInfo.current-1)*pageInfo.size+$index+1}}</td>
						<td width="120px" style="word-wrap:break-word;word-break:break-all;">{{item.grantCode |limitTo:16}}</td>
						<td width="120px" style="word-wrap:break-word;word-break:break-all;">{{item.proposer}}</td>
						<td>{{item.businessName}}</td>
						<td width="70px" style="word-wrap:break-word;word-break:break-all;">{{item.currencyName}}</td>
						<td style="text-align:right;">{{item.grantAmtStr}}</td>
						<td>{{item.scopeBusinPeriod}}</td>
						<td>
							<span ng-show="item.grantStatus=='1'" class="text-success" style="color: blue">已变更</span>
							<span ng-show="item.grantStatus=='2'" class="text-success" style="color: orange">新建审核中</span>
							<span ng-show="item.grantStatus=='3'" class="text-success" style="color: green">已批未放</span>
							<span ng-show="item.grantStatus=='4'" class="text-success" style="color: purple;">发放中</span>
							<span ng-show="item.grantStatus=='5'" class="text-success" style="color: lightgreen">已发放</span>
							<span ng-show="item.grantStatus=='6'" class="text-success" style="color: black">已废弃</span>
							<span ng-show="item.grantStatus=='7'" class="text-success" style="color: orange">废弃审核中</span>
							<span ng-show="item.grantStatus=='8'" class="text-success" style="color: orange">变更审核中</span>
							<span ng-show="item.grantStatus=='9'" class="text-success" style="color: black">失效</span>
							<span ng-show="item.grantStatus=='10'" class="text-success" style="color: red">已驳回</span>
							<span ng-show="item.grantStatus=='11'" class="text-success" style="color: black">冻结</span>
							<span ng-show="item.grantStatus=='12'" class="text-success" style="color: black">删除</span>
							<span ng-show="item.grantStatus=='13'" class="text-success" style="color:#CAE1FF">已过期</span>
							<span ng-show="item.grantStatus=='15'" class="text-success" style="color:brown">已结清</span>
						</td>
						<td width="85px" style="word-wrap:break-word;word-break:break-all;">{{item.deptName}}</td>
						<td width="85px" style="word-wrap:break-word;word-break:break-all;">{{item.createByName}}</td> 
						<td width="90px" style="word-wrap:break-word;word-break:break-all;">{{item.createTime | date:'yyyy-MM-dd'}}</td>
						<td>
							<li>
								<a ng-click="openPop('B','',item.grantCode,'')">查看详情</a>
							</li>
							<li>
								<a ng-click="openWindow(item.grantCode,$index)" data-toggle="modal" data-target="#fileModal">查看附件</a>
							</li>
							<li>
								<a ng-show="item.grantStatus=='3'" ng-click="disabledGrant(item.id)">废弃</a>
							</li>
							<li>
								<a ng-show="item.grantStatus=='2'||item.grantStatus=='10'" ng-click="delGrant(item.id)">删除</a>
							</li>
							<li>
								<a ng-show="item.grantStatus=='5'" ng-click="editGrant(item.id,item.grantCode)">变更</a>
							</li> 
							<li>
								<a ng-show="item.grantStatus=='10'" ng-click="editNew(item.id,item.grantCode)">重新提交</a>
							</li>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- 底部分页-->
		<span data-ng-include=" 'src/tpl/pageInfo.html' "></span>
		
		<!-- 快照信息查看 -->
		<div ng-include="'src/app/biz/grant/view_file.html'"></div>
	</div>
	<!-- /.panel -->
</div>
<!-- /.wrapper-data -->
