<!-- toaster directive -->
<toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}"></toaster-container>
<!-- / toaster directive -->

<!-- 导航条 -->
<div class="bg-white bread-crumb">
	<ul class="breadcrumb b-a m-b-n-xs lter b-b wrapper-md">
		<li>
			<a ui-sref="main">
				<i class="fa fa-home"></i> 首页</a>
		</li>
		<li>
			<a ui-sref="main.sys.dicType.list">码表管理</a>
		</li>
		<li class="active" ng-bind="title"></li>
	</ul>
</div>

<!-- 内容区域 -->
<div class="wrapper-md content">
	<div class="panel panel-default">
		<!-- 头部 -->
		<div class="panel-heading font-bold">{{title}}
			<a ng-if="record.id==null" class="btn btn-sm btn-icon btn-rounded btn-default pull-right m-t-n-xs" ui-sref="main.sys.dicType.detail({code: itemType})">
				<i class="text-md fa fa-mail-reply text-muted" title="关闭"></i>
			</a>
			<a ng-if="record.id!=null" class="btn btn-sm btn-icon btn-rounded btn-default pull-right m-t-n-xs" ui-sref="main.sys.dicType.detail({code: record.type})">
				<i class="text-md fa fa-mail-reply text-muted" title="关闭"></i>
			</a>
		</div>
		<!--表单-->
		<div class="panel-body">
			<form class="form-horizontal" name="user_form">
				<!--用户名-->
				<div class="form-group">
					<label class="col-lg-2 col-sm-3 control-label" for="type">
						<span class="text-danger wrapper-sm">*</span>类型编码</label>
					<div class="col-sm-6">
						<input disabled type="text" ng-if="record.id==null" class="form-control" name="type" required="required" placeholder="请输入大写英文字母作为编码..."
						    ng-pattern="/^[A-Z]$/" ng-model="itemType">
						<input disabled type="text" ng-if="record.id!=null" class="form-control" name="type" required="required" placeholder="请输入大写英文字母作为编码..."
						    ng-pattern="/^[A-Z]$/" ng-model="record.type">
					</div>
				</div>
				<div class="line line-dashed b-b line-lg pull-in"></div>
				<div class="form-group">
					<label class="col-lg-2 col-sm-3 control-label" for="code">
						<span class="text-danger wrapper-sm">*</span>值编码</label>
					<div class="col-sm-6">
						<input type="text" ng-readonly="{{record.id!=null}}" onblur="codeJiaoYan(this.value)" class="form-control" name="code" id="code"
						    placeholder="请输入值编码..." ng-model="record.code">
						<span style="color: red;" id="codeMsg"></span>
					</div>
				</div>
				<div class="line line-dashed b-b line-lg pull-in"></div>
				<div class="form-group">
					<label class="col-lg-2 col-sm-3 control-label" for="codeText">
						<span class="text-danger wrapper-sm">*</span>值名称</label>
					<div class="col-sm-6">
						<input type="text" class="form-control" name="codeText" onblur="codeTextJiaoYan()" id="codeText" placeholder="请输入值名称..."
						    ng-model="record.codeText">
						<span style="color: red;" id="codeTextMsg"></span>
					</div>
				</div>
				<div class="line line-dashed b-b line-lg pull-in"></div>
				<div class="form-group">
					<label class="col-lg-2 col-sm-3 control-label" for="sortNo">
						<span class="text-danger wrapper-sm"></span>排序</label>
					<div class="col-sm-6">
						<input type="text" class="form-control" name="sortNo" id="sortNo" placeholder="请输入数字.." ng-pattern="/^\d$/" ng-model="record.sortNo">
					</div>
				</div>
				<div class="line line-dashed b-b line-lg pull-in"></div>
				<div class="form-group">
					<label class="col-lg-2 col-sm-3 control-label" for="remark">
						<span class="text-danger wrapper-sm"></span>描述</label>
					<div class="col-sm-6">
						<input type="text" class="form-control" name="remark" id="remark" placeholder="请输入描述.." ng-model="record.remark">
					</div>
				</div>
				<!--btn-->
				<div class="form-group">
					<div class="col-sm-6 col-sm-offset-3">
						<button type="button" id="submitBtn" onclick="test()" class="btn btn-info w-xs m-l-xl" ng-disabled="isDisabled">保存</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
<script type="text/javascript">
	var count = 0;

	function codeJiaoYan(code) {
		if (code == null || code.trim() == '') {
			$('#codeMsg').text("请输入值编码");
			count += 1;
		}else if(/^[A-Z]{1,50}$/.test(code) == false){
			$('#codeMsg').text("值编码应为50位以内的纯大写字母");
			count += 1;
		}
		 else {
			$('#codeMsg').text("");
		}
	}

	function codeTextJiaoYan() {
		if ($('#codeText').val() == null || $('#codeText').val().trim() == '') {
			$('#codeTextMsg').text("请输入值名称");
			count += 1;
		}else if($('#codeText').val().length > 30){
			$('#codeTextMsg').text("值名称应为小于30位的字符");
			count += 1;
		}else {
			$('#codeTextMsg').text("");
		}
	}

	function test() {
		count = 0;
		var code = $('#code').val();
		var codeText = $('#codeText').val();
		codeJiaoYan(code);
		codeTextJiaoYan(codeText);
		if (count == 0) {
			$('#submitBtn').attr("type", "submit");
		}
	}
</script>